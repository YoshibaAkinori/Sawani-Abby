-- 売上分析用サンプルデータ作成
-- 既存データに追加する形で作成

USE salon_db;

-- 1. 追加顧客データ
INSERT INTO customers (customer_id, line_user_id, last_name, first_name, last_name_kana, first_name_kana, phone_number, email, birth_date, gender, notes, base_visit_count, created_at, updated_at) VALUES
('c1000001-0000-0000-0000-000000000001', NULL, '佐藤', '美咲', 'サトウ', 'ミサキ', '080-1111-1111', 'sato.misaki@example.com', '1992-03-15', 'female', NULL, 8, '2025-01-15 10:00:00', '2025-10-17 10:00:00'),
('c1000002-0000-0000-0000-000000000002', NULL, '高橋', '健太', 'タカハシ', 'ケンタ', '080-2222-2222', 'takahashi.kenta@example.com', '1988-07-22', 'male', NULL, 12, '2025-02-10 11:00:00', '2025-10-17 10:00:00'),
('c1000003-0000-0000-0000-000000000003', NULL, '渡辺', '麻衣', 'ワタナベ', 'マイ', '080-3333-3333', 'watanabe.mai@example.com', '1995-11-08', 'female', NULL, 5, '2025-03-20 09:00:00', '2025-10-17 10:00:00'),
('c1000004-0000-0000-0000-000000000004', NULL, '伊藤', '翔太', 'イトウ', 'ショウタ', '080-4444-4444', 'ito.shota@example.com', '1990-05-30', 'male', NULL, 3, '2025-04-05 14:00:00', '2025-10-17 10:00:00'),
('c1000005-0000-0000-0000-000000000005', NULL, '中村', '優子', 'ナカムラ', 'ユウコ', '080-5555-5555', 'nakamura.yuko@example.com', '1987-09-14', 'female', NULL, 15, '2025-01-25 13:00:00', '2025-10-17 10:00:00');

-- 2. 回数券購入データ(様々なパターン)
INSERT INTO customer_tickets (customer_ticket_id, customer_id, plan_id, purchase_date, expiry_date, sessions_remaining, purchase_price) VALUES
-- 佐藤美咲: 60分10回券(会員女性) - 完全購入済み
('t1000001-0000-0000-0000-000000000001', 'c1000001-0000-0000-0000-000000000001', '30dfe7f6-9d27-11f0-8e8d-b2353c7546ec', '2025-09-01', '2026-09-01', 5, 70000),
-- 高橋健太: 60分5回券(会員男性) - 分割払い中
('t1000002-0000-0000-0000-000000000002', 'c1000002-0000-0000-0000-000000000002', '5b17a109-9d29-11f0-8e8d-b2353c7546ec', '2025-09-15', '2026-09-15', 3, 42500),
-- 渡辺麻衣: 90分5回券(会員女性) - 完全購入済み
('t1000003-0000-0000-0000-000000000003', 'c1000003-0000-0000-0000-000000000003', '44689095-9d27-11f0-8e8d-b2353c7546ec', '2025-08-20', '2026-08-20', 2, 56500),
-- 伊藤翔太: キャビテーション5回券 - 分割払い中
('t1000004-0000-0000-0000-000000000004', 'c1000004-0000-0000-0000-000000000004', '7d0b8322-9eae-11f0-a8d1-362b931374cc', '2025-10-01', '2026-10-01', 4, 25000),
-- 中村優子: 60分10回券(会員女性) - 完全購入済み  
('t1000005-0000-0000-0000-000000000005', 'c1000005-0000-0000-0000-000000000005', '30dfe7f6-9d27-11f0-8e8d-b2353c7546ec', '2025-07-10', '2026-07-10', 3, 70000);

-- 3. 回数券支払いデータ
INSERT INTO ticket_payments (payment_id, customer_ticket_id, payment_date, amount_paid, payment_method, notes) VALUES
-- 佐藤美咲: 一括払い
('tp10001-0000-0000-0000-000000000001', 't1000001-0000-0000-0000-000000000001', '2025-09-01 10:30:00', 70000, 'card', NULL),
-- 高橋健太: 分割払い(初回)
('tp10002-0000-0000-0000-000000000002', 't1000002-0000-0000-0000-000000000002', '2025-09-15 11:00:00', 20000, 'cash', NULL),
-- 高橋健太: 分割払い(2回目)
('tp10003-0000-0000-0000-000000000003', 't1000002-0000-0000-0000-000000000002', '2025-09-22 14:30:00', 15000, 'cash', '回数券使用時の未払い分支払い'),
-- 高橋健太: 分割払い(3回目)
('tp10004-0000-0000-0000-000000000004', 't1000002-0000-0000-0000-000000000002', '2025-10-05 16:00:00', 7500, 'cash', '回数券使用時の未払い分支払い'),
-- 渡辺麻衣: 一括払い
('tp10005-0000-0000-0000-000000000005', 't1000003-0000-0000-0000-000000000003', '2025-08-20 13:00:00', 56500, 'card', NULL),
-- 伊藤翔太: 分割払い(初回)
('tp10006-0000-0000-0000-000000000006', 't1000004-0000-0000-0000-000000000004', '2025-10-01 10:00:00', 10000, 'cash', NULL),
-- 伊藤翔太: 分割払い(2回目)
('tp10007-0000-0000-0000-000000000007', 't1000004-0000-0000-0000-000000000004', '2025-10-08 15:00:00', 15000, 'card', '回数券使用時の未払い分支払い'),
-- 中村優子: 一括払い
('tp10008-0000-0000-0000-000000000008', 't1000005-0000-0000-0000-000000000005', '2025-07-10 11:00:00', 70000, 'card', NULL);

-- 4. 支払いデータ(payments)
-- 4-1. 佐藤美咲の会計履歴
INSERT INTO payments (payment_id, customer_id, booking_id, staff_id, payment_date, service_id, service_name, service_price, service_duration, payment_type, ticket_id, coupon_id, limited_offer_id, service_subtotal, options_total, discount_amount, total_amount, payment_method, cash_amount, card_amount, notes, related_payment_id, is_cancelled, payment_amount) VALUES
-- 回数券購入
('p1000001-0000-0000-0000-000000000001', 'c1000001-0000-0000-0000-000000000001', NULL, 'cc69b300-9b97-11f0-b7ae-5a93b150659e', '2025-09-01 10:30:00', '7cfc9898-9d10-11f0-8e8d-b2353c7546ec', '60分10回券(会員女性)(回数券購入)', 70000, 0, 'ticket', 't1000001-0000-0000-0000-000000000001', NULL, NULL, 70000, 0, 0, 70000, 'card', 0, 70000, '回数券購入: 60分10回券(会員女性)(10回)', NULL, FALSE, 70000),
-- 回数券使用1回目(オプション付き)
('p1000002-0000-0000-0000-000000000002', 'c1000001-0000-0000-0000-000000000001', NULL, 'cc69b300-9b97-11f0-b7ae-5a93b150659e', '2025-09-10 14:00:00', '7cfc9898-9d10-11f0-8e8d-b2353c7546ec', '美骨小顔コルギ(60分)', 7000, 60, 'ticket', 't1000001-0000-0000-0000-000000000001', NULL, NULL, 0, 4000, 0, 4000, 'cash', 4000, 0, '', NULL, FALSE, 0),
-- 回数券使用2回目
('p1000003-0000-0000-0000-000000000003', 'c1000001-0000-0000-0000-000000000001', NULL, 'deabe83a-9b97-11f0-b7ae-5a93b150659e', '2025-09-24 15:30:00', '7cfc9898-9d10-11f0-8e8d-b2353c7546ec', '美骨小顔コルギ(60分)', 7000, 60, 'ticket', 't1000001-0000-0000-0000-000000000001', NULL, NULL, 0, 0, 0, 0, 'cash', 0, 0, '', NULL, FALSE, 0),
-- 回数券使用3回目
('p1000004-0000-0000-0000-000000000004', 'c1000001-0000-0000-0000-000000000001', NULL, 'cc69b300-9b97-11f0-b7ae-5a93b150659e', '2025-10-08 11:00:00', '7cfc9898-9d10-11f0-8e8d-b2353c7546ec', '美骨小顔コルギ(60分)', 7000, 60, 'ticket', 't1000001-0000-0000-0000-000000000001', NULL, NULL, 0, 8000, 0, 8000, 'cash', 8000, 0, '', NULL, FALSE, 0),
-- 通常施術(単発)
('p1000005-0000-0000-0000-000000000005', 'c1000001-0000-0000-0000-000000000001', NULL, 'cc69b300-9b97-11f0-b7ae-5a93b150659e', '2025-10-15 13:00:00', '937a225d-9d10-11f0-8e8d-b2353c7546ec', '美骨小顔コルギ(90分)', 19000, 90, 'normal', NULL, NULL, NULL, 19000, 4000, 0, 23000, 'card', 0, 23000, '', NULL, FALSE, 0);

-- 4-2. 高橋健太の会計履歴
INSERT INTO payments (payment_id, customer_id, booking_id, staff_id, payment_date, service_id, service_name, service_price, service_duration, payment_type, ticket_id, coupon_id, limited_offer_id, service_subtotal, options_total, discount_amount, total_amount, payment_method, cash_amount, card_amount, notes, related_payment_id, is_cancelled, payment_amount) VALUES
-- 回数券購入(頭金のみ)
('p1000010-0000-0000-0000-000000000010', 'c1000002-0000-0000-0000-000000000002', NULL, 'cc69b300-9b97-11f0-b7ae-5a93b150659e', '2025-09-15 11:00:00', '7cfc9898-9d10-11f0-8e8d-b2353c7546ec', '60分5回券(会員男性)(回数券購入)', 42500, 0, 'ticket', 't1000002-0000-0000-0000-000000000002', NULL, NULL, 20000, 0, 0, 20000, 'cash', 20000, 0, '回数券購入: 60分5回券(会員男性)(5回)', NULL, FALSE, 20000),
-- 回数券使用1回目
('p1000011-0000-0000-0000-000000000011', 'c1000002-0000-0000-0000-000000000002', NULL, 'f5b5eecc-9b97-11f0-b7ae-5a93b150659e', '2025-09-22 14:30:00', '7cfc9898-9d10-11f0-8e8d-b2353c7546ec', '美骨小顔コルギ(60分)', 8500, 60, 'ticket', 't1000002-0000-0000-0000-000000000002', NULL, NULL, 0, 0, 0, 15000, 'cash', 15000, 0, '', NULL, FALSE, 15000),
-- 残金支払い記録
('p1000012-0000-0000-0000-000000000012', 'c1000002-0000-0000-0000-000000000002', NULL, 'f5b5eecc-9b97-11f0-b7ae-5a93b150659e', '2025-09-22 14:31:00', '7cfc9898-9d10-11f0-8e8d-b2353c7546ec', '60分5回券(会員男性) 残金支払い', 0, 0, 'ticket', 't1000002-0000-0000-0000-000000000002', NULL, NULL, 0, 0, 0, 15000, 'cash', 15000, 0, '回数券使用時の未払い分支払い', 'p1000011-0000-0000-0000-000000000011', FALSE, 15000),
-- 回数券使用2回目
('p1000013-0000-0000-0000-000000000013', 'c1000002-0000-0000-0000-000000000002', NULL, 'cc69b300-9b97-11f0-b7ae-5a93b150659e', '2025-10-05 16:00:00', '7cfc9898-9d10-11f0-8e8d-b2353c7546ec', '美骨小顔コルギ(60分)', 8500, 60, 'ticket', 't1000002-0000-0000-0000-000000000002', NULL, NULL, 0, 4000, 0, 11500, 'cash', 11500, 0, '', NULL, FALSE, 7500),
-- 残金支払い記録
('p1000014-0000-0000-0000-000000000014', 'c1000002-0000-0000-0000-000000000002', NULL, 'cc69b300-9b97-11f0-b7ae-5a93b150659e', '2025-10-05 16:01:00', '7cfc9898-9d10-11f0-8e8d-b2353c7546ec', '60分5回券(会員男性) 残金支払い', 0, 0, 'ticket', 't1000002-0000-0000-0000-000000000002', NULL, NULL, 0, 0, 0, 7500, 'cash', 7500, 0, '回数券使用時の未払い分支払い', 'p1000013-0000-0000-0000-000000000013', FALSE, 7500);

-- 4-3. 渡辺麻衣の会計履歴
INSERT INTO payments (payment_id, customer_id, booking_id, staff_id, payment_date, service_id, service_name, service_price, service_duration, payment_type, ticket_id, coupon_id, limited_offer_id, service_subtotal, options_total, discount_amount, total_amount, payment_method, cash_amount, card_amount, notes, related_payment_id, is_cancelled, payment_amount) VALUES
-- 回数券購入
('p1000020-0000-0000-0000-000000000020', 'c1000003-0000-0000-0000-000000000003', NULL, 'deabe83a-9b97-11f0-b7ae-5a93b150659e', '2025-08-20 13:00:00', '937a225d-9d10-11f0-8e8d-b2353c7546ec', '90分5回券(会員女性)(回数券購入)', 56500, 0, 'ticket', 't1000003-0000-0000-0000-000000000003', NULL, NULL, 56500, 0, 0, 56500, 'card', 0, 56500, '回数券購入: 90分5回券(会員女性)(5回)', NULL, FALSE, 56500),
-- 回数券使用1回目
('p1000021-0000-0000-0000-000000000021', 'c1000003-0000-0000-0000-000000000003', NULL, 'deabe83a-9b97-11f0-b7ae-5a93b150659e', '2025-09-03 10:00:00', '937a225d-9d10-11f0-8e8d-b2353c7546ec', '美骨小顔コルギ(90分)', 11300, 90, 'ticket', 't1000003-0000-0000-0000-000000000003', NULL, NULL, 0, 0, 0, 0, 'cash', 0, 0, '', NULL, FALSE, 0),
-- 回数券使用2回目(オプション付き)
('p1000022-0000-0000-0000-000000000022', 'c1000003-0000-0000-0000-000000000003', NULL, 'deabe83a-9b97-11f0-b7ae-5a93b150659e', '2025-09-17 14:00:00', '937a225d-9d10-11f0-8e8d-b2353c7546ec', '美骨小顔コルギ(90分)', 11300, 90, 'ticket', 't1000003-0000-0000-0000-000000000003', NULL, NULL, 0, 4000, 0, 4000, 'cash', 4000, 0, '', NULL, FALSE, 0),
-- クーポン使用
('p1000023-0000-0000-0000-000000000023', 'c1000003-0000-0000-0000-000000000003', NULL, 'cc69b300-9b97-11f0-b7ae-5a93b150659e', '2025-10-01 11:30:00', '2ffd7ad2-9eae-11f0-a8d1-362b931374cc', '[背中美人コース] キャビテーション×ラジオ波', 4500, 60, 'coupon', NULL, '7684c24d-a1f1-11f0-9274-6e14d9ac68da', NULL, 4500, 0, 0, 4500, 'cash', 4500, 0, '', NULL, FALSE, 0),
-- 通常施術
('p1000024-0000-0000-0000-000000000024', 'c1000003-0000-0000-0000-000000000003', NULL, 'deabe83a-9b97-11f0-b7ae-5a93b150659e', '2025-10-14 15:00:00', '7cfc9898-9d10-11f0-8e8d-b2353c7546ec', '美骨小顔コルギ(60分)', 15000, 60, 'normal', NULL, NULL, NULL, 15000, 8000, 0, 23000, 'card', 0, 23000, '', NULL, FALSE, 0);

-- 4-4. 伊藤翔太の会計履歴
INSERT INTO payments (payment_id, customer_id, booking_id, staff_id, payment_date, service_id, service_name, service_price, service_duration, payment_type, ticket_id, coupon_id, limited_offer_id, service_subtotal, options_total, discount_amount, total_amount, payment_method, cash_amount, card_amount, notes, related_payment_id, is_cancelled, payment_amount) VALUES
-- 回数券購入(頭金のみ)
('p1000030-0000-0000-0000-000000000030', 'c1000004-0000-0000-0000-000000000004', NULL, 'f5b5eecc-9b97-11f0-b7ae-5a93b150659e', '2025-10-01 10:00:00', '2ffd7ad2-9eae-11f0-a8d1-362b931374cc', 'キャビテーション5回券(回数券購入)', 25000, 0, 'ticket', 't1000004-0000-0000-0000-000000000004', NULL, NULL, 10000, 0, 0, 10000, 'cash', 10000, 0, '回数券購入: キャビテーション5回券(5回)', NULL, FALSE, 10000),
-- 回数券使用1回目
('p1000031-0000-0000-0000-000000000031', 'c1000004-0000-0000-0000-000000000004', NULL, 'f5b5eecc-9b97-11f0-b7ae-5a93b150659e', '2025-10-08 15:00:00', '2ffd7ad2-9eae-11f0-a8d1-362b931374cc', 'キャビテーション', 5000, 60, 'ticket', 't1000004-0000-0000-0000-000000000004', NULL, NULL, 0, 0, 0, 15000, 'card', 0, 15000, '', NULL, FALSE, 15000),
-- 残金支払い記録
('p1000032-0000-0000-0000-000000000032', 'c1000004-0000-0000-0000-000000000004', NULL, 'f5b5eecc-9b97-11f0-b7ae-5a93b150659e', '2025-10-08 15:01:00', '2ffd7ad2-9eae-11f0-a8d1-362b931374cc', 'キャビテーション5回券 残金支払い', 0, 0, 'ticket', 't1000004-0000-0000-0000-000000000004', NULL, NULL, 0, 0, 0, 15000, 'card', 0, 15000, '回数券使用時の未払い分支払い', 'p1000031-0000-0000-0000-000000000031', FALSE, 15000);

-- 4-5. 中村優子の会計履歴
INSERT INTO payments (payment_id, customer_id, booking_id, staff_id, payment_date, service_id, service_name, service_price, service_duration, payment_type, ticket_id, coupon_id, limited_offer_id, service_subtotal, options_total, discount_amount, total_amount, payment_method, cash_amount, card_amount, notes, related_payment_id, is_cancelled, payment_amount) VALUES
-- 回数券購入
('p1000040-0000-0000-0000-000000000040', 'c1000005-0000-0000-0000-000000000005', NULL, 'cc69b300-9b97-11f0-b7ae-5a93b150659e', '2025-07-10 11:00:00', '7cfc9898-9d10-11f0-8e8d-b2353c7546ec', '60分10回券(会員女性)(回数券購入)', 70000, 0, 'ticket', 't1000005-0000-0000-0000-000000000005', NULL, NULL, 70000, 0, 0, 70000, 'card', 0, 70000, '回数券購入: 60分10回券(会員女性)(10回)', NULL, FALSE, 70000),
-- 複数回の使用履歴
('p1000041-0000-0000-0000-000000000041', 'c1000005-0000-0000-0000-000000000005', NULL, 'cc69b300-9b97-11f0-b7ae-5a93b150659e', '2025-07-24 14:00:00', '7cfc9898-9d10-11f0-8e8d-b2353c7546ec', '美骨小顔コルギ(60分)', 7000, 60, 'ticket', 't1000005-0000-0000-0000-000000000005', NULL, NULL, 0, 4000, 0, 4000, 'cash', 4000, 0, '', NULL, FALSE, 0),
('p1000042-0000-0000-0000-000000000042', 'c1000005-0000-0000-0000-000000000005', NULL, 'deabe83a-9b97-11f0-b7ae-5a93b150659e', '2025-08-07 16:30:00', '7cfc9898-9d10-11f0-8e8d-b2353c7546ec', '美骨小顔コルギ(60分)', 7000, 60, 'ticket', 't1000005-0000-0000-0000-000000000005', NULL, NULL, 0, 0, 0, 0, 'cash', 0, 0, '', NULL, FALSE, 0),
('p1000043-0000-0000-0000-000000000043', 'c1000005-0000-0000-0000-000000000005', NULL, 'cc69b300-9b97-11f0-b7ae-5a93b150659e', '2025-08-21 10:00:00', '7cfc9898-9d10-11f0-8e8d-b2353c7546ec', '美骨小顔コルギ(60分)', 7000, 60, 'ticket', 't1000005-0000-0000-0000-000000000005', NULL, NULL, 0, 8000, 0, 8000, 'cash', 8000, 0, '', NULL, FALSE, 0),
('p1000044-0000-0000-0000-000000000044', 'c1000005-0000-0000-0000-000000000005', NULL, 'cc69b300-9b97-11f0-b7ae-5a93b150659e', '2025-09-04 13:30:00', '7cfc9898-9d10-11f0-8e8d-b2353c7546ec', '美骨小顔コルギ(60分)', 7000, 60, 'ticket', 't1000005-0000-0000-0000-000000000005', NULL, NULL, 0, 4000, 0, 4000, 'card', 0, 4000, '', NULL, FALSE, 0),
('p1000045-0000-0000-0000-000000000045', 'c1000005-0000-0000-0000-000000000005', NULL, 'deabe83a-9b97-11f0-b7ae-5a93b150659e', '2025-09-18 15:00:00', '7cfc9898-9d10-11f0-8e8d-b2353c7546ec', '美骨小顔コルギ(60分)', 7000, 60, 'ticket', 't1000005-0000-0000-0000-000000000005', NULL, NULL, 0, 0, 0, 0, 'cash', 0, 0, '', NULL, FALSE, 0),
('p1000046-0000-0000-0000-000000000046', 'c1000005-0000-0000-0000-000000000005', NULL, 'cc69b300-9b97-11f0-b7ae-5a93b150659e', '2025-10-02 11:00:00', '7cfc9898-9d10-11f0-8e8d-b2353c7546ec', '美骨小顔コルギ(60分)', 7000, 60, 'ticket', 't1000005-0000-0000-0000-000000000005', NULL, NULL, 0, 4000, 0, 4000, 'cash', 4000, 0, '', NULL, FALSE, 0),
('p1000047-0000-0000-0000-000000000047', 'c1000005-0000-0000-0000-000000000005', NULL, 'cc69b300-9b97-11f0-b7ae-5a93b150659e', '2025-10-16 14:30:00', '7cfc9898-9d10-11f0-8e8d-b2353c7546ec', '美骨小顔コルギ(60分)', 7000, 60, 'ticket', 't1000005-0000-0000-0000-000000000005', NULL, NULL, 0, 0, 0, 0, 'cash', 0, 0, '', NULL, FALSE, 0);

-- 5. オプション追加データ
INSERT INTO payment_options (payment_option_id, payment_id, option_id, option_name, option_category, price, duration_minutes, quantity, is_free) VALUES
-- 佐藤美咲のオプション
('po10001-0000-0000-0000-000000000001', 'p1000002-0000-0000-0000-000000000002', '456e8974-9cd0-11f0-8e8d-b2353c7546ec', '石膏パック【リフトアップ・保湿・美白】', 'フェイシャル', 4000, 30, 1, FALSE),
('po10002-0000-0000-0000-000000000002', 'p1000004-0000-0000-0000-000000000004', '4e4f9f3a-9cd0-11f0-8e8d-b2353c7546ec', 'ラジオ波フェイス【新陳代謝UP・脂肪燃焼】', 'フェイシャル', 4000, 30, 1, FALSE),
('po10003-0000-0000-0000-000000000003', 'p1000004-0000-0000-0000-000000000004', '456e8974-9cd0-11f0-8e8d-b2353c7546ec', '石膏パック【リフトアップ・保湿・美白】', 'フェイシャル', 4000, 30, 1, FALSE),
('po10004-0000-0000-0000-000000000004', 'p1000005-0000-0000-0000-000000000005', '481992c1-9cd0-11f0-8e8d-b2353c7546ec', '炭酸パック【抗酸化・抗炎症・保湿】', 'フェイシャル', 4000, 30, 1, FALSE),
-- 高橋健太のオプション
('po10010-0000-0000-0000-000000000010', 'p1000013-0000-0000-0000-000000000013', '50d04dd7-9cd0-11f0-8e8d-b2353c7546ec', 'ドライヘッド【眼精疲労・自律神経・脳疲労】', 'ボディ', 4000, 30, 1, FALSE),
-- 渡辺麻衣のオプション
('po10020-0000-0000-0000-000000000020', 'p1000022-0000-0000-0000-000000000022', '613aa78b-9d47-11f0-8e8d-b2353c7546ec', 'ネックセラピー【スマホ首・首こり・血行促進】', 'ボディ', 4000, 30, 1, FALSE),
('po10021-0000-0000-0000-000000000021', 'p1000024-0000-0000-0000-000000000024', '456e8974-9cd0-11f0-8e8d-b2353c7546ec', '石膏パック【リフトアップ・保湿・美白】', 'フェイシャル', 4000, 30, 1, FALSE),
('po10022-0000-0000-0000-000000000022', 'p1000024-0000-0000-0000-000000000024', '481992c1-9cd0-11f0-8e8d-b2353c7546ec', '炭酸パック【抗酸化・抗炎症・保湿】', 'フェイシャル', 4000, 30, 1, FALSE),
-- 中村優子のオプション
('po10040-0000-0000-0000-000000000040', 'p1000041-0000-0000-0000-000000000041', '456e8974-9cd0-11f0-8e8d-b2353c7546ec', '石膏パック【リフトアップ・保湿・美白】', 'フェイシャル', 4000, 30, 1, FALSE),
('po10041-0000-0000-0000-000000000041', 'p1000043-0000-0000-0000-000000000043', '4e4f9f3a-9cd0-11f0-8e8d-b2353c7546ec', 'ラジオ波フェイス【新陳代謝UP・脂肪燃焼】', 'フェイシャル', 4000, 30, 1, FALSE),
('po10042-0000-0000-0000-000000000042', 'p1000043-0000-0000-0000-000000000043', '456e8974-9cd0-11f0-8e8d-b2353c7546ec', '石膏パック【リフトアップ・保湿・美白】', 'フェイシャル', 4000, 30, 1, FALSE),
('po10043-0000-0000-0000-000000000043', 'p1000044-0000-0000-0000-000000000044', '481992c1-9cd0-11f0-8e8d-b2353c7546ec', '炭酸パック【抗酸化・抗炎症・保湿】', 'フェイシャル', 4000, 30, 1, FALSE),
('po10044-0000-0000-0000-000000000044', 'p1000046-0000-0000-0000-000000000046', '50d04dd7-9cd0-11f0-8e8d-b2353c7546ec', 'ドライヘッド【眼精疲労・自律神経・脳疲労】', 'ボディ', 4000, 30, 1, FALSE);

-- 6. 既存顧客の追加会計データ
INSERT INTO payments (payment_id, customer_id, booking_id, staff_id, payment_date, service_id, service_name, service_price, service_duration, payment_type, ticket_id, coupon_id, limited_offer_id, service_subtotal, options_total, discount_amount, total_amount, payment_method, cash_amount, card_amount, notes, related_payment_id, is_cancelled, payment_amount) VALUES
-- 田中花子(既存顧客)の追加データ
('p2000001-0000-0000-0000-000000000001', '880e8400-e29b-41d4-a716-446655440001', NULL, 'cc69b300-9b97-11f0-b7ae-5a93b150659e', '2025-09-05 10:00:00', '7cfc9898-9d10-11f0-8e8d-b2353c7546ec', '美骨小顔コルギ(60分)', 15000, 60, 'normal', NULL, NULL, NULL, 15000, 0, 0, 15000, 'cash', 15000, 0, '', NULL, FALSE, 0),
('p2000002-0000-0000-0000-000000000002', '880e8400-e29b-41d4-a716-446655440001', NULL, 'deabe83a-9b97-11f0-b7ae-5a93b150659e', '2025-09-19 14:30:00', '7cfc9898-9d10-11f0-8e8d-b2353c7546ec', '美骨小顔コルギ(60分)', 15000, 60, 'normal', NULL, NULL, NULL, 15000, 4000, 0, 19000, 'card', 0, 19000, '', NULL, FALSE, 0),
('p2000003-0000-0000-0000-000000000003', '880e8400-e29b-41d4-a716-446655440001', NULL, 'cc69b300-9b97-11f0-b7ae-5a93b150659e', '2025-10-03 11:00:00', '937a225d-9d10-11f0-8e8d-b2353c7546ec', '美骨小顔コルギ(90分)', 19000, 90, 'normal', NULL, NULL, NULL, 19000, 8000, 0, 27000, 'cash', 27000, 0, '', NULL, FALSE, 0),
-- 山田太郎(既存顧客)の追加データ
('p2000010-0000-0000-0000-000000000010', '880e8400-e29b-41d4-a716-446655440002', NULL, 'f5b5eecc-9b97-11f0-b7ae-5a93b150659e', '2025-08-15 15:00:00', '2ffd7ad2-9eae-11f0-a8d1-362b931374cc', 'キャビテーション', 6000, 60, 'normal', NULL, NULL, NULL, 6000, 0, 0, 6000, 'cash', 6000, 0, '', NULL, FALSE, 0),
('p2000011-0000-0000-0000-000000000011', '880e8400-e29b-41d4-a716-446655440002', NULL, 'f5b5eecc-9b97-11f0-b7ae-5a93b150659e', '2025-08-29 16:30:00', '2ffd7ad2-9eae-11f0-a8d1-362b931374cc', 'キャビテーション', 6000, 60, 'normal', NULL, NULL, NULL, 6000, 4000, 0, 10000, 'cash', 10000, 0, '', NULL, FALSE, 0),
('p2000012-0000-0000-0000-000000000012', '880e8400-e29b-41d4-a716-446655440002', NULL, 'cc69b300-9b97-11f0-b7ae-5a93b150659e', '2025-09-12 10:30:00', '7cfc9898-9d10-11f0-8e8d-b2353c7546ec', '美骨小顔コルギ(60分)', 15000, 60, 'normal', NULL, NULL, NULL, 15000, 0, 0, 15000, 'card', 0, 15000, '', NULL, FALSE, 0),
('p2000013-0000-0000-0000-000000000013', '880e8400-e29b-41d4-a716-446655440002', NULL, 'f5b5eecc-9b97-11f0-b7ae-5a93b150659e', '2025-09-26 13:00:00', '2ffd7ad2-9eae-11f0-a8d1-362b931374cc', 'キャビテーション', 6000, 60, 'normal', NULL, NULL, NULL, 6000, 0, 0, 6000, 'cash', 6000, 0, '', NULL, FALSE, 0),
('p2000014-0000-0000-0000-000000000014', '880e8400-e29b-41d4-a716-446655440002', NULL, 'cc69b300-9b97-11f0-b7ae-5a93b150659e', '2025-10-10 14:00:00', '7cfc9898-9d10-11f0-8e8d-b2353c7546ec', '美骨小顔コルギ(60分)', 15000, 60, 'normal', NULL, NULL, NULL, 15000, 4000, 0, 19000, 'cash', 19000, 0, '', NULL, FALSE, 0),
-- 鈴木美香(既存顧客)の追加データ
('p2000020-0000-0000-0000-000000000020', '880e8400-e29b-41d4-a716-446655440003', NULL, 'deabe83a-9b97-11f0-b7ae-5a93b150659e', '2025-09-08 11:00:00', '937a225d-9d10-11f0-8e8d-b2353c7546ec', '美骨小顔コルギ(90分)', 19000, 90, 'normal', NULL, NULL, NULL, 19000, 0, 0, 19000, 'card', 0, 19000, '', NULL, FALSE, 0),
('p2000021-0000-0000-0000-000000000021', '880e8400-e29b-41d4-a716-446655440003', NULL, 'deabe83a-9b97-11f0-b7ae-5a93b150659e', '2025-09-22 15:30:00', '937a225d-9d10-11f0-8e8d-b2353c7546ec', '美骨小顔コルギ(90分)', 19000, 90, 'normal', NULL, NULL, NULL, 19000, 4000, 0, 23000, 'card', 0, 23000, '', NULL, FALSE, 0),
('p2000022-0000-0000-0000-000000000022', '880e8400-e29b-41d4-a716-446655440003', NULL, 'cc69b300-9b97-11f0-b7ae-5a93b150659e', '2025-10-06 10:30:00', '7cfc9898-9d10-11f0-8e8d-b2353c7546ec', '美骨小顔コルギ(60分)', 15000, 60, 'normal', NULL, NULL, NULL, 15000, 8000, 0, 23000, 'cash', 23000, 0, '', NULL, FALSE, 0);

-- 7. 既存顧客オプション追加
INSERT INTO payment_options (payment_option_id, payment_id, option_id, option_name, option_category, price, duration_minutes, quantity, is_free) VALUES
-- 田中花子のオプション
('po20001-0000-0000-0000-000000000001', 'p2000002-0000-0000-0000-000000000002', '456e8974-9cd0-11f0-8e8d-b2353c7546ec', '石膏パック【リフトアップ・保湿・美白】', 'フェイシャル', 4000, 30, 1, FALSE),
('po20002-0000-0000-0000-000000000002', 'p2000003-0000-0000-0000-000000000003', '4e4f9f3a-9cd0-11f0-8e8d-b2353c7546ec', 'ラジオ波フェイス【新陳代謝UP・脂肪燃焼】', 'フェイシャル', 4000, 30, 1, FALSE),
('po20003-0000-0000-0000-000000000003', 'p2000003-0000-0000-0000-000000000003', '456e8974-9cd0-11f0-8e8d-b2353c7546ec', '石膏パック【リフトアップ・保湿・美白】', 'フェイシャル', 4000, 30, 1, FALSE),
-- 山田太郎のオプション
('po20010-0000-0000-0000-000000000010', 'p2000011-0000-0000-0000-000000000011', '7ac088dc-9d47-11f0-8e8d-b2353c7546ec', '足つぼ【内臓機能・冷え性・むくみ】', 'ボディ', 4000, 30, 1, FALSE),
('po20011-0000-0000-0000-000000000011', 'p2000014-0000-0000-0000-000000000014', '50d04dd7-9cd0-11f0-8e8d-b2353c7546ec', 'ドライヘッド【眼精疲労・自律神経・脳疲労】', 'ボディ', 4000, 30, 1, FALSE),
-- 鈴木美香のオプション
('po20020-0000-0000-0000-000000000020', 'p2000021-0000-0000-0000-000000000021', '481992c1-9cd0-11f0-8e8d-b2353c7546ec', '炭酸パック【抗酸化・抗炎症・保湿】', 'フェイシャル', 4000, 30, 1, FALSE),
('po20021-0000-0000-0000-000000000021', 'p2000022-0000-0000-0000-000000000022', '456e8974-9cd0-11f0-8e8d-b2353c7546ec', '石膏パック【リフトアップ・保湿・美白】', 'フェイシャル', 4000, 30, 1, FALSE),
('po20022-0000-0000-0000-000000000022', 'p2000022-0000-0000-0000-000000000022', '4e4f9f3a-9cd0-11f0-8e8d-b2353c7546ec', 'ラジオ波フェイス【新陳代謝UP・脂肪燃焼】', 'フェイシャル', 4000, 30, 1, FALSE);

-- 8. クーポン使用履歴の追加
INSERT INTO coupon_usage (usage_id, coupon_id, customer_id, payment_id, used_at, selected_free_options, total_discount_amount) VALUES
('cu10001-0000-0000-0000-000000000001', '7684c24d-a1f1-11f0-9274-6e14d9ac68da', 'c1000003-0000-0000-0000-000000000003', 'p1000023-0000-0000-0000-000000000023', '2025-10-01 11:30:00', NULL, 0);

-- 9. クーポンの使用回数を更新
UPDATE coupons SET used_count = used_count + 1 WHERE coupon_id = '7684c24d-a1f1-11f0-9274-6e14d9ac68da';

-- 10. 9月〜10月のキャンセルデータも追加(分析の精度向上のため)
INSERT INTO payments (payment_id, customer_id, booking_id, staff_id, payment_date, service_id, service_name, service_price, service_duration, payment_type, ticket_id, coupon_id, limited_offer_id, service_subtotal, options_total, discount_amount, total_amount, payment_method, cash_amount, card_amount, notes, related_payment_id, is_cancelled, cancelled_at, cancelled_reason, payment_amount) VALUES
('p3000001-0000-0000-0000-000000000001', '880e8400-e29b-41d4-a716-446655440001', NULL, 'cc69b300-9b97-11f0-b7ae-5a93b150659e', '2025-09-15 10:00:00', '7cfc9898-9d10-11f0-8e8d-b2353c7546ec', '美骨小顔コルギ(60分)', 15000, 60, 'normal', NULL, NULL, NULL, 15000, 0, 0, 15000, 'cash', 15000, 0, '', NULL, TRUE, '2025-09-15 09:30:00', '体調不良のためキャンセル', 0);

-- データ確認用クエリ
-- 売上サマリー確認
SELECT 
    DATE_FORMAT(payment_date, '%Y-%m') as 月,
    COUNT(*) as 取引数,
    SUM(total_amount) as 総売上,
    SUM(cash_amount) as 現金売上,
    SUM(card_amount) as カード売上,
    COUNT(DISTINCT customer_id) as ユニーク顧客数
FROM payments 
WHERE is_cancelled = FALSE 
  AND payment_date >= '2025-07-01'
GROUP BY DATE_FORMAT(payment_date, '%Y-%m')
ORDER BY 月;

-- 回数券の売上と使用状況確認
SELECT 
    tp.name as 回数券名,
    COUNT(DISTINCT ct.customer_ticket_id) as 販売数,
    SUM(ct.purchase_price) as 総売上,
    SUM(CASE WHEN ct.sessions_remaining = 0 THEN 1 ELSE 0 END) as 完全消化,
    SUM(CASE WHEN ct.sessions_remaining > 0 THEN ct.sessions_remaining ELSE 0 END) as 残回数合計
FROM customer_tickets ct
JOIN ticket_plans tp ON ct.plan_id = tp.plan_id
WHERE ct.purchase_date >= '2025-07-01'
GROUP BY tp.plan_id, tp.name
ORDER BY 総売上 DESC;

-- スタッフ別売上確認
SELECT 
    s.name as スタッフ名,
    COUNT(*) as 取引数,
    SUM(p.total_amount) as 総売上,
    ROUND(AVG(p.total_amount)) as 平均単価,
    COUNT(DISTINCT p.customer_id) as ユニーク顧客数
FROM payments p
JOIN staff s ON p.staff_id = s.staff_id
WHERE p.is_cancelled = FALSE
  AND p.payment_date >= '2025-07-01'
GROUP BY s.staff_id, s.name
ORDER BY 総売上 DESC;

-- オプション利用状況確認
SELECT 
    po.option_name as オプション名,
    po.option_category as カテゴリ,
    COUNT(*) as 使用回数,
    SUM(po.quantity) as 総数量,
    SUM(po.price * po.quantity) as 総売上
FROM payment_options po
JOIN payments p ON po.payment_id = p.payment_id
WHERE p.is_cancelled = FALSE
  AND p.payment_date >= '2025-07-01'
GROUP BY po.option_name, po.option_category
ORDER BY 使用回数 DESC;